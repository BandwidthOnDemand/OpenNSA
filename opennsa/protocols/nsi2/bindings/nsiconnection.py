## Generated by pyxsdgen

from xml.etree import ElementTree as ET

# types

class QueryRecursiveResultCriteriaType:
    def __init__(self, version, schedule, serviceType, children):
        self.version = version  # int
        self.schedule = schedule  # ScheduleType
        self.serviceType = serviceType  # string
        self.children = children  # [ ChildRecursiveType ]

    @classmethod
    def build(self, element):
        return QueryRecursiveResultCriteriaType(
                element.get('version'),
                ScheduleType.build(element.find('schedule')) if element.find('schedule') is not None else None,
                element.findtext('serviceType'),
                [ ChildRecursiveType.build(e) for e in element.find('children') ] if element.find('children') is not None else None
               )

    def xml(self, elementName):
        r = ET.Element(elementName, attrib={'version' : str(self.version)})
        r.append(self.schedule.xml('schedule'))
        if self.serviceType:
            ET.SubElement(r, 'serviceType').text = self.serviceType
        if self.children:
            ET.SubElement(r, 'children').extend( [ e.xml('children') for e in self.children ] )
        return r


class QuerySummaryResultCriteriaType:
    def __init__(self, version, schedule, serviceType, children):
        self.version = version  # int
        self.schedule = schedule  # ScheduleType
        self.serviceType = serviceType  # string
        self.children = children  # [ ChildSummaryType ]

    @classmethod
    def build(self, element):
        return QuerySummaryResultCriteriaType(
                element.get('version'),
                ScheduleType.build(element.find('schedule')) if element.find('schedule') is not None else None,
                element.findtext('serviceType'),
                [ ChildSummaryType.build(e) for e in element.find('children') ] if element.find('children') is not None else None
               )

    def xml(self, elementName):
        r = ET.Element(elementName, attrib={'version' : str(self.version)})
        r.append(self.schedule.xml('schedule'))
        if self.serviceType:
            ET.SubElement(r, 'serviceType').text = self.serviceType
        if self.children:
            ET.SubElement(r, 'children').extend( [ e.xml('children') for e in self.children ] )
        return r


class ScheduleType:
    def __init__(self, startTime, endTime):
        self.startTime = startTime  # DateTimeType -> dateTime
        self.endTime = endTime  # DateTimeType -> dateTime

    @classmethod
    def build(self, element):
        return ScheduleType(
                element.findtext('startTime'),
                element.findtext('endTime')
               )

    def xml(self, elementName):
        r = ET.Element(elementName)
        if self.startTime:
            ET.SubElement(r, 'startTime').text = str(self.startTime)
        if self.endTime:
            ET.SubElement(r, 'endTime').text = str(self.endTime)
        return r


class ReserveConfirmedType:
    def __init__(self, connectionId, globalReservationId, description, criteria):
        self.connectionId = connectionId  # ConnectionIdType -> string
        self.globalReservationId = globalReservationId  # GlobalReservationIdType -> anyURI
        self.description = description  # string
        self.criteria = criteria  # ReservationConfirmCriteriaType

    @classmethod
    def build(self, element):
        return ReserveConfirmedType(
                element.findtext('connectionId'),
                element.findtext('globalReservationId'),
                element.findtext('description'),
                ReservationConfirmCriteriaType.build(element.find('criteria')) if element.find('criteria') is not None else None
               )

    def xml(self, elementName):
        r = ET.Element(elementName)
        ET.SubElement(r, 'connectionId').text = self.connectionId
        if self.globalReservationId:
            ET.SubElement(r, 'globalReservationId').text = str(self.globalReservationId)
        if self.description:
            ET.SubElement(r, 'description').text = self.description
        r.append(self.criteria.xml('criteria'))
        return r


class QueryFailedType:
    def __init__(self, serviceException):
        self.serviceException = serviceException  # ServiceExceptionType

    @classmethod
    def build(self, element):
        return QueryFailedType(
                ServiceExceptionType.build(element.find('serviceException')) if element.find('serviceException') is not None else None
               )

    def xml(self, elementName):
        r = ET.Element(elementName)
        r.append(self.serviceException.xml(ET.QName('http://schemas.ogf.org/nsi/2013/07/framework/types', 'serviceException')))
        return r


class ErrorEventType:
    def __init__(self, event, additionalInfo, serviceException, connectionId, notificationId, timeStamp):
        self.event = event  # EventEnumType -> string
        self.additionalInfo = additionalInfo  # [ TypeValuePairType ]
        self.serviceException = serviceException  # ServiceExceptionType
        self.connectionId = connectionId  # ConnectionIdType -> string
        self.notificationId = notificationId  # NotificationIdType -> int
        self.timeStamp = timeStamp  # DateTimeType -> dateTime

    @classmethod
    def build(self, element):
        return ErrorEventType(
                element.findtext('event'),
                [ TypeValuePairType.build(e) for e in element.find('additionalInfo') ] if element.find('additionalInfo') is not None else None,
                ServiceExceptionType.build(element.find('serviceException')) if element.find('serviceException') is not None else None,
                element.findtext('connectionId'),
                int(element.findtext('notificationId')),
                element.findtext('timeStamp')
               )

    def xml(self, elementName):
        r = ET.Element(elementName)
        ET.SubElement(r, 'event').text = self.event
        if self.additionalInfo:
            ET.SubElement(r, 'additionalInfo').extend( [ e.xml(ET.QName('http://schemas.ogf.org/nsi/2013/07/framework/types', 'additionalInfo')) for e in self.additionalInfo ] )
        if self.serviceException:
            r.append(self.serviceException.xml(ET.QName('http://schemas.ogf.org/nsi/2013/07/framework/types', 'serviceException')))
        ET.SubElement(r, 'connectionId').text = self.connectionId
        ET.SubElement(r, 'notificationId').text = str(self.notificationId)
        ET.SubElement(r, 'timeStamp').text = str(self.timeStamp)
        return r


class QuerySummaryResultType:
    def __init__(self, connectionId, globalReservationId, description, criteria, requesterNSA, connectionStates, notificationId):
        self.connectionId = connectionId  # ConnectionIdType -> string
        self.globalReservationId = globalReservationId  # GlobalReservationIdType -> anyURI
        self.description = description  # string
        self.criteria = criteria  # [ QuerySummaryResultCriteriaType ]
        self.requesterNSA = requesterNSA  # NsaIdType -> anyURI
        self.connectionStates = connectionStates  # ConnectionStatesType
        self.notificationId = notificationId  # NotificationIdType -> int

    @classmethod
    def build(self, element):
        return QuerySummaryResultType(
                element.findtext('connectionId'),
                element.findtext('globalReservationId'),
                element.findtext('description'),
                [ QuerySummaryResultCriteriaType.build(e) for e in element.findall('schedule') ] if element.find('schedule') is not None else None,
                element.findtext('requesterNSA'),
                ConnectionStatesType.build(element.find('connectionStates')) if element.find('connectionStates') is not None else None,
                int(element.findtext('notificationId'))
               )

    def xml(self, elementName):
        r = ET.Element(elementName)
        ET.SubElement(r, 'connectionId').text = self.connectionId
        if self.globalReservationId:
            ET.SubElement(r, 'globalReservationId').text = str(self.globalReservationId)
        if self.description:
            ET.SubElement(r, 'description').text = self.description
        if self.criteria:
            for el in self.criteria:
                ET.SubElement(r, 'criteria').extend( [ e.xml('schedule') for e in el ] )
        ET.SubElement(r, 'requesterNSA').text = str(self.requesterNSA)
        r.append(self.connectionStates.xml('connectionStates'))
        if self.notificationId:
            ET.SubElement(r, 'notificationId').text = str(self.notificationId)
        return r


class DataPlaneStateChangeRequestType:
    def __init__(self, connectionId, notificationId, timeStamp, dataPlaneStatus):
        self.connectionId = connectionId  # ConnectionIdType -> string
        self.notificationId = notificationId  # NotificationIdType -> int
        self.timeStamp = timeStamp  # DateTimeType -> dateTime
        self.dataPlaneStatus = dataPlaneStatus  # DataPlaneStatusType

    @classmethod
    def build(self, element):
        return DataPlaneStateChangeRequestType(
                element.findtext('connectionId'),
                int(element.findtext('notificationId')),
                element.findtext('timeStamp'),
                DataPlaneStatusType.build(element.find('dataPlaneStatus')) if element.find('dataPlaneStatus') is not None else None
               )

    def xml(self, elementName):
        r = ET.Element(elementName)
        ET.SubElement(r, 'connectionId').text = self.connectionId
        ET.SubElement(r, 'notificationId').text = str(self.notificationId)
        ET.SubElement(r, 'timeStamp').text = str(self.timeStamp)
        r.append(self.dataPlaneStatus.xml('dataPlaneStatus'))
        return r


class GenericFailedType:
    def __init__(self, connectionId, connectionStates, serviceException):
        self.connectionId = connectionId  # ConnectionIdType -> string
        self.connectionStates = connectionStates  # ConnectionStatesType
        self.serviceException = serviceException  # ServiceExceptionType

    @classmethod
    def build(self, element):
        return GenericFailedType(
                element.findtext('connectionId'),
                ConnectionStatesType.build(element.find('connectionStates')) if element.find('connectionStates') is not None else None,
                ServiceExceptionType.build(element.find('serviceException')) if element.find('serviceException') is not None else None
               )

    def xml(self, elementName):
        r = ET.Element(elementName)
        ET.SubElement(r, 'connectionId').text = self.connectionId
        r.append(self.connectionStates.xml('connectionStates'))
        r.append(self.serviceException.xml(ET.QName('http://schemas.ogf.org/nsi/2013/07/framework/types', 'serviceException')))
        return r


class NotificationBaseType:
    def __init__(self, connectionId, notificationId, timeStamp):
        self.connectionId = connectionId  # ConnectionIdType -> string
        self.notificationId = notificationId  # NotificationIdType -> int
        self.timeStamp = timeStamp  # DateTimeType -> dateTime

    @classmethod
    def build(self, element):
        return NotificationBaseType(
                element.findtext('connectionId'),
                int(element.findtext('notificationId')),
                element.findtext('timeStamp')
               )

    def xml(self, elementName):
        r = ET.Element(elementName)
        ET.SubElement(r, 'connectionId').text = self.connectionId
        ET.SubElement(r, 'notificationId').text = str(self.notificationId)
        ET.SubElement(r, 'timeStamp').text = str(self.timeStamp)
        return r


class ReservationRequestCriteriaType:
    def __init__(self, version, schedule, serviceType, serviceDefinitions):
        self.version = version  # int
        self.schedule = schedule  # ScheduleType
        self.serviceType = serviceType  # string
        self.serviceDefinitions = serviceDefinitions # { name : service definitions }

    @classmethod
    def build(self, element):
        # we do some manual stuff here
        from . import p2pservices
        service_defs = [ p2pservices.parseElement(e) for e in element if e.tag not in ('schedule', 'serviceType') ]
        return ReservationRequestCriteriaType(
                element.get('version'),
                ScheduleType.build(element.find('schedule')) if element.find('schedule') is not None else None,
                element.findtext('serviceType'),
                service_defs
               )

    def xml(self, elementName):
        r = ET.Element(elementName, attrib={'version' : str(self.version)})
        if self.schedule:
            r.append(self.schedule.xml('schedule'))
        if self.serviceType:
            ET.SubElement(r, 'serviceType').text = self.serviceType
        if self.serviceDefinitions:
            for sn, sd in self.serviceDefinitions.items():
                r.append(sd.xml(sn))
        return r


class ReserveTimeoutRequestType:
    def __init__(self, connectionId, notificationId, timeStamp, timeoutValue, originatingConnectionId, originatingNSA):
        self.connectionId = connectionId  # ConnectionIdType -> string
        self.notificationId = notificationId  # NotificationIdType -> int
        self.timeStamp = timeStamp  # DateTimeType -> dateTime
        self.timeoutValue = timeoutValue  # int
        self.originatingConnectionId = originatingConnectionId  # ConnectionIdType -> string
        self.originatingNSA = originatingNSA  # NsaIdType -> anyURI

    @classmethod
    def build(self, element):
        return ReserveTimeoutRequestType(
                int(element.findtext('timeoutValue')),
                element.findtext('originatingConnectionId'),
                element.findtext('originatingNSA'),
                element.findtext('connectionId'),
                int(element.findtext('notificationId')),
                element.findtext('timeStamp')
               )

    def xml(self, elementName):
        r = ET.Element(elementName)
        ET.SubElement(r, 'timeoutValue').text = str(self.timeoutValue)
        ET.SubElement(r, 'originatingConnectionId').text = self.originatingConnectionId
        ET.SubElement(r, 'originatingNSA').text = str(self.originatingNSA)
        ET.SubElement(r, 'connectionId').text = self.connectionId
        ET.SubElement(r, 'notificationId').text = str(self.notificationId)
        ET.SubElement(r, 'timeStamp').text = str(self.timeStamp)
        return r


class ConnectionStatesType:
    def __init__(self, reservationState, provisionState, lifecycleState, dataPlaneStatus):
        self.reservationState = reservationState  # ReservationStateEnumType -> string
        self.provisionState = provisionState  # ProvisionStateEnumType -> string
        self.lifecycleState = lifecycleState  # LifecycleStateEnumType -> string
        self.dataPlaneStatus = dataPlaneStatus  # DataPlaneStatusType

    @classmethod
    def build(self, element):
        return ConnectionStatesType(
                element.findtext('reservationState'),
                element.findtext('provisionState'),
                element.findtext('lifecycleState'),
                DataPlaneStatusType.build(element.find('dataPlaneStatus')) if element.find('dataPlaneStatus') is not None else None
               )

    def xml(self, elementName):
        r = ET.Element(elementName)
        ET.SubElement(r, 'reservationState').text = self.reservationState
        if self.provisionState:
            ET.SubElement(r, 'provisionState').text = self.provisionState
        ET.SubElement(r, 'lifecycleState').text = self.lifecycleState
        r.append(self.dataPlaneStatus.xml('dataPlaneStatus'))
        return r


class QueryNotificationConfirmedType:
    def __init__(self, errorEvent, reserveTimeout, dataPlaneStateChange, messageDeliveryTimeout):
        self.errorEvent = errorEvent  # ErrorEventType
        self.reserveTimeout = reserveTimeout  # ReserveTimeoutRequestType
        self.dataPlaneStateChange = dataPlaneStateChange  # DataPlaneStateChangeRequestType
        self.messageDeliveryTimeout = messageDeliveryTimeout  # MessageDeliveryTimeoutRequestType

    @classmethod
    def build(self, element):
        return QueryNotificationConfirmedType(
                ErrorEventType.build(element.find('errorEvent')) if element.find('errorEvent') is not None else None,
                ReserveTimeoutRequestType.build(element.find('reserveTimeout')) if element.find('reserveTimeout') is not None else None,
                DataPlaneStateChangeRequestType.build(element.find('dataPlaneStateChange')) if element.find('dataPlaneStateChange') is not None else None,
                MessageDeliveryTimeoutRequestType.build(element.find('messageDeliveryTimeout')) if element.find('messageDeliveryTimeout') is not None else None
               )

    def xml(self, elementName):
        r = ET.Element(elementName)
        r.append(self.errorEvent.xml('errorEvent'))
        r.append(self.reserveTimeout.xml('reserveTimeout'))
        r.append(self.dataPlaneStateChange.xml('dataPlaneStateChange'))
        r.append(self.messageDeliveryTimeout.xml('messageDeliveryTimeout'))
        return r


class QueryNotificationType:
    def __init__(self, connectionId, startNotificationId, endNotificationId):
        self.connectionId = connectionId  # ConnectionIdType -> string
        self.startNotificationId = startNotificationId  # int
        self.endNotificationId = endNotificationId  # int

    @classmethod
    def build(self, element):
        return QueryNotificationType(
                element.findtext('connectionId'),
                int(element.findtext('startNotificationId')),
                int(element.findtext('endNotificationId'))
               )

    def xml(self, elementName):
        r = ET.Element(elementName)
        ET.SubElement(r, 'connectionId').text = self.connectionId
        if self.startNotificationId:
            ET.SubElement(r, 'startNotificationId').text = str(self.startNotificationId)
        if self.endNotificationId:
            ET.SubElement(r, 'endNotificationId').text = str(self.endNotificationId)
        return r


class ReservationConfirmCriteriaType:
    def __init__(self, version, schedule, serviceType, serviceDefinitions):
        self.version = version  # int
        self.schedule = schedule  # ScheduleType
        self.serviceType = serviceType  # string
        self.serviceDefinitions = serviceDefinitions # [ anyType ]

    @classmethod
    def build(self, element):
        from . import p2pservices
        service_defs = dict( [ (e.tag, p2pservices.parseElement(e)) for e in element if e.tag not in ('schedule', 'serviceType') ] )
        return ReservationConfirmCriteriaType(
                element.get('version'),
                ScheduleType.build(element.find('schedule')) if element.find('schedule') is not None else None,
                element.findtext('serviceType'),
                service_defs
               )

    def xml(self, elementName):
        r = ET.Element(elementName, attrib={'version' : str(self.version)})
        r.append(self.schedule.xml('schedule'))
        if self.serviceType:
            ET.SubElement(r, 'serviceType').text = self.serviceType
        if self.serviceDefinitions:
            for sn, sd in self.serviceDefinitions.items():
                r.append(sd.xml(sn))
        return r


class ReserveResponseType:
    def __init__(self, connectionId):
        self.connectionId = connectionId  # ConnectionIdType -> string

    @classmethod
    def build(self, element):
        return ReserveResponseType(
                element.findtext('connectionId')
               )

    def xml(self, elementName):
        r = ET.Element(elementName)
        ET.SubElement(r, 'connectionId').text = self.connectionId
        return r


class GenericRequestType:
    def __init__(self, connectionId):
        self.connectionId = connectionId  # ConnectionIdType -> string

    @classmethod
    def build(self, element):
        return GenericRequestType(
                element.findtext('connectionId')
               )

    def xml(self, elementName):
        r = ET.Element(elementName)
        ET.SubElement(r, 'connectionId').text = self.connectionId
        return r


class TypeValuePairType:
    def __init__(self, type, namespace, value):
        self.type = type  # string
        self.namespace = namespace  # anyURI
        self.value = value  # [ string ]

    @classmethod
    def build(self, element):
        return TypeValuePairType(
                element.get('type'),
                element.get('namespace'),
                element.findtext('value')
               )

    def xml(self, elementName):
        r = ET.Element(elementName, attrib={'type' : str(self.type), 'namespace' : str(self.namespace)})
        if self.value:
            for el in self.value:
                ET.SubElement(r, 'value').text = el
        return r


class ServiceExceptionType:
    def __init__(self, nsaId, connectionId, serviceType, errorId, text, variables, childException):
        self.nsaId = nsaId  # NsaIdType -> anyURI
        self.connectionId = connectionId  # ConnectionIdType -> string
        self.serviceType = serviceType  # string
        self.errorId = errorId  # string
        self.text = text  # string
        self.variables = variables  # [ TypeValuePairType ]
        self.childException = childException  # [ ServiceExceptionType ]

    @classmethod
    def build(self, element):
        return ServiceExceptionType(
                element.findtext('nsaId'),
                element.findtext('connectionId'),
                element.findtext('serviceType'),
                element.findtext('errorId'),
                element.findtext('text'),
                [ TypeValuePairType.build(e) for e in element.find('variables') ] if element.find('variables') is not None else None,
                [ ServiceExceptionType.build(e) for e in element.findall('nsaId') ] if element.find('nsaId') is not None else None
               )

    def xml(self, elementName):
        r = ET.Element(elementName)
        ET.SubElement(r, 'nsaId').text = str(self.nsaId)
        if self.connectionId:
            ET.SubElement(r, 'connectionId').text = self.connectionId
        if self.serviceType:
            ET.SubElement(r, 'serviceType').text = self.serviceType
        ET.SubElement(r, 'errorId').text = self.errorId
        ET.SubElement(r, 'text').text = self.text
        if self.variables:
            ET.SubElement(r, 'variables').extend( [ e.xml('variables') for e in self.variables ] )
        if self.childException:
            for el in self.childException:
                ET.SubElement(r, 'childException').extend( [ e.xml('nsaId') for e in el ] )
        return r


class GenericConfirmedType:
    def __init__(self, connectionId):
        self.connectionId = connectionId  # ConnectionIdType -> string

    @classmethod
    def build(self, element):
        return GenericConfirmedType(
                element.findtext('connectionId')
               )

    def xml(self, elementName):
        r = ET.Element(elementName)
        ET.SubElement(r, 'connectionId').text = self.connectionId
        return r


class ChildRecursiveType:
    def __init__(self, order, connectionId, providerNSA, connectionStates, criteria):
        self.order = order  # int
        self.connectionId = connectionId  # ConnectionIdType -> string
        self.providerNSA = providerNSA  # NsaIdType -> anyURI
        self.connectionStates = connectionStates  # ConnectionStatesType
        self.criteria = criteria  # [ QueryRecursiveResultCriteriaType ]

    @classmethod
    def build(self, element):
        return ChildRecursiveType(
                element.get('order'),
                element.findtext('connectionId'),
                element.findtext('providerNSA'),
                ConnectionStatesType.build(element.find('connectionStates')) if element.find('connectionStates') is not None else None,
                [ QueryRecursiveResultCriteriaType.build(e) for e in element.findall('schedule') ] if element.find('schedule') is not None else None
               )

    def xml(self, elementName):
        r = ET.Element(elementName, attrib={'order' : str(self.order)})
        ET.SubElement(r, 'connectionId').text = self.connectionId
        ET.SubElement(r, 'providerNSA').text = str(self.providerNSA)
        r.append(self.connectionStates.xml('connectionStates'))
        if self.criteria:
            for el in self.criteria:
                ET.SubElement(r, 'criteria').extend( [ e.xml('schedule') for e in el ] )
        return r


class QueryType:
    def __init__(self, connectionId, globalReservationId):
        self.connectionId = connectionId  # [ ConnectionIdType -> string ]
        self.globalReservationId = globalReservationId  # [ GlobalReservationIdType -> anyURI ]

    @classmethod
    def build(self, element):
        return QueryType(
                element.findtext('connectionId'),
                element.findtext('globalReservationId')
               )

    def xml(self, elementName):
        r = ET.Element(elementName)
        if self.connectionId:
            for el in self.connectionId:
                ET.SubElement(r, 'connectionId').text = el
        if self.globalReservationId:
            for el in self.globalReservationId:
                ET.SubElement(r, 'globalReservationId').text = str(el)
        return r


class QueryRecursiveResultType:
    def __init__(self, connectionId, globalReservationId, description, criteria, requesterNSA, connectionStates, notificationId):
        self.connectionId = connectionId  # ConnectionIdType -> string
        self.globalReservationId = globalReservationId  # GlobalReservationIdType -> anyURI
        self.description = description  # string
        self.criteria = criteria  # [ QueryRecursiveResultCriteriaType ]
        self.requesterNSA = requesterNSA  # NsaIdType -> anyURI
        self.connectionStates = connectionStates  # ConnectionStatesType
        self.notificationId = notificationId  # NotificationIdType -> int

    @classmethod
    def build(self, element):
        return QueryRecursiveResultType(
                element.findtext('connectionId'),
                element.findtext('globalReservationId'),
                element.findtext('description'),
                [ QueryRecursiveResultCriteriaType.build(e) for e in element.findall('schedule') ] if element.find('schedule') is not None else None,
                element.findtext('requesterNSA'),
                ConnectionStatesType.build(element.find('connectionStates')) if element.find('connectionStates') is not None else None,
                int(element.findtext('notificationId'))
               )

    def xml(self, elementName):
        r = ET.Element(elementName)
        ET.SubElement(r, 'connectionId').text = self.connectionId
        if self.globalReservationId:
            ET.SubElement(r, 'globalReservationId').text = str(self.globalReservationId)
        if self.description:
            ET.SubElement(r, 'description').text = self.description
        if self.criteria:
            for el in self.criteria:
                ET.SubElement(r, 'criteria').extend( [ e.xml('schedule') for e in el ] )
        ET.SubElement(r, 'requesterNSA').text = str(self.requesterNSA)
        r.append(self.connectionStates.xml('connectionStates'))
        if self.notificationId:
            ET.SubElement(r, 'notificationId').text = str(self.notificationId)
        return r


class DataPlaneStatusType:
    def __init__(self, active, version, versionConsistent):
        self.active = active  # boolean
        self.version = version  # int
        self.versionConsistent = versionConsistent  # boolean

    @classmethod
    def build(self, element):
        return DataPlaneStatusType(
                True if element.findtext('active') == 'true' else False,
                int(element.findtext('version')),
                True if element.findtext('versionConsistent') == 'true' else False
               )

    def xml(self, elementName):
        r = ET.Element(elementName)
        ET.SubElement(r, 'active').text = 'true' if self.active else 'false'
        ET.SubElement(r, 'version').text = str(self.version)
        ET.SubElement(r, 'versionConsistent').text = 'true' if self.versionConsistent else 'false'
        return r


class GenericErrorType:
    def __init__(self, serviceException):
        self.serviceException = serviceException  # ServiceExceptionType

    @classmethod
    def build(self, element):
        return GenericErrorType(
                ServiceExceptionType.build(element.find('serviceException')) if element.find('serviceException') is not None else None
               )

    def xml(self, elementName):
        r = ET.Element(elementName)
        r.append(self.serviceException.xml(ET.QName('http://schemas.ogf.org/nsi/2013/07/framework/types', 'serviceException')))
        return r


class ChildSummaryType:
    def __init__(self, order, connectionId, providerNSA, serviceType):
        self.order = order  # int
        self.connectionId = connectionId  # ConnectionIdType -> string
        self.providerNSA = providerNSA  # NsaIdType -> anyURI
        self.serviceType = serviceType  # string

    @classmethod
    def build(self, element):
        return ChildSummaryType(
                element.get('order'),
                element.findtext('connectionId'),
                element.findtext('providerNSA'),
                element.findtext('serviceType')
               )

    def xml(self, elementName):
        r = ET.Element(elementName, attrib={'order' : str(self.order)})
        ET.SubElement(r, 'connectionId').text = self.connectionId
        ET.SubElement(r, 'providerNSA').text = str(self.providerNSA)
        if self.serviceType:
            ET.SubElement(r, 'serviceType').text = self.serviceType
        return r


class MessageDeliveryTimeoutRequestType:
    def __init__(self, correlationId, connectionId, notificationId, timeStamp):
        self.correlationId = correlationId  # UuidType -> anyURI
        self.connectionId = connectionId  # ConnectionIdType -> string
        self.notificationId = notificationId  # NotificationIdType -> int
        self.timeStamp = timeStamp  # DateTimeType -> dateTime

    @classmethod
    def build(self, element):
        return MessageDeliveryTimeoutRequestType(
                element.findtext('correlationId'),
                element.findtext('connectionId'),
                int(element.findtext('notificationId')),
                element.findtext('timeStamp')
               )

    def xml(self, elementName):
        r = ET.Element(elementName)
        ET.SubElement(r, 'correlationId').text = str(self.correlationId)
        ET.SubElement(r, 'connectionId').text = self.connectionId
        ET.SubElement(r, 'notificationId').text = str(self.notificationId)
        ET.SubElement(r, 'timeStamp').text = str(self.timeStamp)
        return r


class GenericAcknowledgmentType:
    def __init__(self):
        pass

    @classmethod
    def build(self, element):
        return GenericAcknowledgmentType( )

    def xml(self, elementName):
        r = ET.Element(elementName)
        return r


class ReserveType:
    def __init__(self, connectionId, globalReservationId, description, criteria):
        self.connectionId = connectionId  # ConnectionIdType -> string
        self.globalReservationId = globalReservationId  # GlobalReservationIdType -> anyURI
        self.description = description  # string
        self.criteria = criteria  # ReservationRequestCriteriaType

    @classmethod
    def build(self, element):
        return ReserveType(
                element.findtext('connectionId'),
                element.findtext('globalReservationId'),
                element.findtext('description'),
                ReservationRequestCriteriaType.build(element.find('criteria')) if element.find('criteria') is not None else None
               )

    def xml(self, elementName):
        r = ET.Element(elementName)
        if self.connectionId:
            ET.SubElement(r, 'connectionId').text = self.connectionId
        if self.globalReservationId:
            ET.SubElement(r, 'globalReservationId').text = str(self.globalReservationId)
        if self.description:
            ET.SubElement(r, 'description').text = self.description
        r.append(self.criteria.xml('criteria'))
        return r


terminate = ET.QName('http://schemas.ogf.org/nsi/2013/07/connection/types', 'terminate')
queryRecursive = ET.QName('http://schemas.ogf.org/nsi/2013/07/connection/types', 'queryRecursive')
reserve = ET.QName('http://schemas.ogf.org/nsi/2013/07/connection/types', 'reserve')
querySummary = ET.QName('http://schemas.ogf.org/nsi/2013/07/connection/types', 'querySummary')
serviceException = ET.QName('http://schemas.ogf.org/nsi/2013/07/framework/types', 'serviceException')
queryNotificationConfirmed = ET.QName('http://schemas.ogf.org/nsi/2013/07/connection/types', 'queryNotificationConfirmed')
reserveAbortConfirmed = ET.QName('http://schemas.ogf.org/nsi/2013/07/connection/types', 'reserveAbortConfirmed')
querySummarySync = ET.QName('http://schemas.ogf.org/nsi/2013/07/connection/types', 'querySummarySync')
reserveTimeout = ET.QName('http://schemas.ogf.org/nsi/2013/07/connection/types', 'reserveTimeout')
reserveConfirmed = ET.QName('http://schemas.ogf.org/nsi/2013/07/connection/types', 'reserveConfirmed')
reserveCommit = ET.QName('http://schemas.ogf.org/nsi/2013/07/connection/types', 'reserveCommit')
terminateConfirmed = ET.QName('http://schemas.ogf.org/nsi/2013/07/connection/types', 'terminateConfirmed')
querySummaryFailed = ET.QName('http://schemas.ogf.org/nsi/2013/07/connection/types', 'querySummaryFailed')
queryRecursiveFailed = ET.QName('http://schemas.ogf.org/nsi/2013/07/connection/types', 'queryRecursiveFailed')
queryNotificationSyncFailed = ET.QName('http://schemas.ogf.org/nsi/2013/07/connection/types', 'queryNotificationSyncFailed')
querySummarySyncConfirmed = ET.QName('http://schemas.ogf.org/nsi/2013/07/connection/types', 'querySummarySyncConfirmed')
reserveFailed = ET.QName('http://schemas.ogf.org/nsi/2013/07/connection/types', 'reserveFailed')
reserveAbort = ET.QName('http://schemas.ogf.org/nsi/2013/07/connection/types', 'reserveAbort')
reserveCommitConfirmed = ET.QName('http://schemas.ogf.org/nsi/2013/07/connection/types', 'reserveCommitConfirmed')
queryNotificationSyncConfirmed = ET.QName('http://schemas.ogf.org/nsi/2013/07/connection/types', 'queryNotificationSyncConfirmed')
provisionConfirmed = ET.QName('http://schemas.ogf.org/nsi/2013/07/connection/types', 'provisionConfirmed')
querySummaryConfirmed = ET.QName('http://schemas.ogf.org/nsi/2013/07/connection/types', 'querySummaryConfirmed')
queryRecursiveConfirmed = ET.QName('http://schemas.ogf.org/nsi/2013/07/connection/types', 'queryRecursiveConfirmed')
dataPlaneStateChange = ET.QName('http://schemas.ogf.org/nsi/2013/07/connection/types', 'dataPlaneStateChange')
releaseConfirmed = ET.QName('http://schemas.ogf.org/nsi/2013/07/connection/types', 'releaseConfirmed')
queryNotification = ET.QName('http://schemas.ogf.org/nsi/2013/07/connection/types', 'queryNotification')
acknowledgment = ET.QName('http://schemas.ogf.org/nsi/2013/07/connection/types', 'acknowledgment')
queryNotificationSync = ET.QName('http://schemas.ogf.org/nsi/2013/07/connection/types', 'queryNotificationSync')
messageDeliveryTimeout = ET.QName('http://schemas.ogf.org/nsi/2013/07/connection/types', 'messageDeliveryTimeout')
serviceException = ET.QName('http://schemas.ogf.org/nsi/2013/07/connection/types', 'serviceException')
reserveCommitFailed = ET.QName('http://schemas.ogf.org/nsi/2013/07/connection/types', 'reserveCommitFailed')
reserveResponse = ET.QName('http://schemas.ogf.org/nsi/2013/07/connection/types', 'reserveResponse')
provision = ET.QName('http://schemas.ogf.org/nsi/2013/07/connection/types', 'provision')
errorEvent = ET.QName('http://schemas.ogf.org/nsi/2013/07/connection/types', 'errorEvent')
error = ET.QName('http://schemas.ogf.org/nsi/2013/07/connection/types', 'error')
querySummarySyncFailed = ET.QName('http://schemas.ogf.org/nsi/2013/07/connection/types', 'querySummarySyncFailed')
queryNotificationFailed = ET.QName('http://schemas.ogf.org/nsi/2013/07/connection/types', 'queryNotificationFailed')
release = ET.QName('http://schemas.ogf.org/nsi/2013/07/connection/types', 'release')

def parse(input_):

    root = ET.fromstring(input_)

    return parseElement(root)


def parseElement(element):

    type_map = {
        '{http://schemas.ogf.org/nsi/2013/07/connection/types}terminate' : GenericRequestType,
        '{http://schemas.ogf.org/nsi/2013/07/connection/types}queryRecursive' : QueryType,
        '{http://schemas.ogf.org/nsi/2013/07/connection/types}reserve' : ReserveType,
        '{http://schemas.ogf.org/nsi/2013/07/connection/types}querySummary' : QueryType,
        '{http://schemas.ogf.org/nsi/2013/07/framework/types}serviceException' : ServiceExceptionType,
        '{http://schemas.ogf.org/nsi/2013/07/connection/types}queryNotificationConfirmed' : QueryNotificationConfirmedType,
        '{http://schemas.ogf.org/nsi/2013/07/connection/types}reserveAbortConfirmed' : GenericConfirmedType,
        '{http://schemas.ogf.org/nsi/2013/07/connection/types}querySummarySync' : QueryType,
        '{http://schemas.ogf.org/nsi/2013/07/connection/types}reserveTimeout' : ReserveTimeoutRequestType,
        '{http://schemas.ogf.org/nsi/2013/07/connection/types}reserveConfirmed' : ReserveConfirmedType,
        '{http://schemas.ogf.org/nsi/2013/07/connection/types}reserveCommit' : GenericRequestType,
        '{http://schemas.ogf.org/nsi/2013/07/connection/types}terminateConfirmed' : GenericConfirmedType,
        '{http://schemas.ogf.org/nsi/2013/07/connection/types}querySummaryFailed' : QueryFailedType,
        '{http://schemas.ogf.org/nsi/2013/07/connection/types}queryRecursiveFailed' : QueryFailedType,
        '{http://schemas.ogf.org/nsi/2013/07/connection/types}queryNotificationSyncFailed' : QueryFailedType,
        '{http://schemas.ogf.org/nsi/2013/07/connection/types}reserveFailed' : GenericFailedType,
        '{http://schemas.ogf.org/nsi/2013/07/connection/types}reserveAbort' : GenericRequestType,
        '{http://schemas.ogf.org/nsi/2013/07/connection/types}reserveCommitConfirmed' : GenericConfirmedType,
        '{http://schemas.ogf.org/nsi/2013/07/connection/types}queryNotificationSyncConfirmed' : QueryNotificationConfirmedType,
        '{http://schemas.ogf.org/nsi/2013/07/connection/types}provisionConfirmed' : GenericConfirmedType,
        '{http://schemas.ogf.org/nsi/2013/07/connection/types}dataPlaneStateChange' : DataPlaneStateChangeRequestType,
        '{http://schemas.ogf.org/nsi/2013/07/connection/types}releaseConfirmed' : GenericConfirmedType,
        '{http://schemas.ogf.org/nsi/2013/07/connection/types}queryNotification' : QueryNotificationType,
        '{http://schemas.ogf.org/nsi/2013/07/connection/types}acknowledgment' : GenericAcknowledgmentType,
        '{http://schemas.ogf.org/nsi/2013/07/connection/types}queryNotificationSync' : QueryNotificationType,
        '{http://schemas.ogf.org/nsi/2013/07/connection/types}messageDeliveryTimeout' : MessageDeliveryTimeoutRequestType,
        '{http://schemas.ogf.org/nsi/2013/07/connection/types}serviceException' : ServiceExceptionType,
        '{http://schemas.ogf.org/nsi/2013/07/connection/types}reserveCommitFailed' : GenericFailedType,
        '{http://schemas.ogf.org/nsi/2013/07/connection/types}reserveResponse' : ReserveResponseType,
        '{http://schemas.ogf.org/nsi/2013/07/connection/types}provision' : GenericRequestType,
        '{http://schemas.ogf.org/nsi/2013/07/connection/types}errorEvent' : ErrorEventType,
        '{http://schemas.ogf.org/nsi/2013/07/connection/types}error' : GenericErrorType,
        '{http://schemas.ogf.org/nsi/2013/07/connection/types}querySummarySyncFailed' : QueryFailedType,
        '{http://schemas.ogf.org/nsi/2013/07/connection/types}queryNotificationFailed' : QueryFailedType,
        '{http://schemas.ogf.org/nsi/2013/07/connection/types}release' : GenericRequestType
    }

    if not element.tag in type_map:
        raise ValueError('No type mapping for tag %s' % element.tag)

    type_ = type_map[element.tag]
    return type_.build(element)
